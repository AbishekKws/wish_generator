{% extends 'frontend/base.html' %}
{% load static %}

{% block title %}Select Wish Type | Surprise Me{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-6 py-10 md:py-16 overflow-hidden min-h-screen">
    <div class="text-center mb-16 md:mb-24 header-animate">
        <h1 class="text-5xl md:text-8xl font-black mb-6 tracking-tighter leading-none text-white">
            Choose a <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-600 drop-shadow-sm">Wish</span> 
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-rose-600 drop-shadow-sm">Category</span>
        </h1>
        <p class="text-gray-400 text-base md:text-xl max-w-2xl mx-auto leading-relaxed opacity-80">
            What is the occasion? Pick one to start the magic and create a memory that lasts forever. âœ¨
        </p>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-10">
        {% for type in types %}
        <a href="{% url 'select_template' type|lower %}" 
           class="wish-card group relative bg-slate-900/30 border border-white/5 p-8 md:p-12 rounded-[3rem] text-center transition-all duration-700 flex flex-col items-center justify-center overflow-hidden backdrop-blur-sm">
            
            <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            
            <div class="absolute -inset-[1px] bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-[3rem] opacity-0 group-hover:opacity-30 blur-sm transition-all duration-500 group-hover:blur-md"></div>

            <div class="text-5xl md:text-7xl mb-6 transform group-hover:scale-125 group-hover:-translate-y-4 transition-all duration-700 cubic-bezier(0.34, 1.56, 0.64, 1) z-10 filter drop-shadow-2xl">
                {% if type == 'Birthday' %}ğŸ‚
                {% elif type == 'Anniversary' %}ğŸ’‘
                {% elif type == 'Love' %}ğŸ’–
                {% elif type == 'Sorry' %}ğŸ™
                {% elif type == 'Friendship' %}ğŸ¤
                {% elif type == 'Good Luck' %}ğŸ€
                {% elif type == 'Graduation' %}ğŸ“
                {% elif type == 'Thank You' %}ğŸ’
                {% elif type == 'New Year' %}ğŸ†
                {% elif type == 'Miss You' %}ğŸ¥º
                {% elif type == 'Proposal' %}ğŸ’
                {% elif type == 'Festival' %}ğŸª”
                {% else %}âœ¨{% endif %}
            </div>

            <h2 class="text-xl md:text-2xl font-black mb-2 text-white/80 group-hover:text-white z-10 tracking-tight transition-colors">
                {{ type }}
            </h2>
            
            <div class="h-1 w-0 group-hover:w-16 bg-gradient-to-r from-blue-500 to-pink-500 transition-all duration-500 rounded-full mb-4 z-10"></div>

            <p class="text-gray-500 text-[10px] md:text-xs uppercase tracking-[0.3em] font-black group-hover:text-pink-400 transition-colors z-10">
                Explore
            </p>

            <div class="absolute top-0 -left-[100%] w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent skew-x-[-25deg] group-hover:left-[100%] transition-all duration-1000 ease-in-out"></div>
        </a>
        {% endfor %}
    </div>
</div>

<style>
    .wish-card {
        box-shadow: 0 20px 40px -20px rgba(0,0,0,0.7);
        transform-style: preserve-3d;
        will-change: transform, opacity;
        -webkit-tap-highlight-color: transparent; 
        touch-action: manipulation;
    }

    .wish-card:hover {
        box-shadow: 0 30px 60px -15px rgba(0,0,0,0.8);
        border-color: rgba(255,255,255,0.1);
    }

    .wish-card:active {
        transform: scale(0.92) translateY(5px) !important;
    }

    /* Spotlights in Background */
    body::before {
        content: "";
        position: fixed;
        top: 20%; left: 10%;
        width: 400px; height: 400px;
        background: radial-gradient(circle, rgba(59,130,246,0.1) 0%, transparent 70%);
        z-index: -1;
    }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tl = gsap.timeline({ defaults: { ease: "power4.out" } });

        // Header animation
        tl.from(".header-animate", {
            y: -100,
            opacity: 0,
            duration: 1.2,
            filter: "blur(15px)"
        });

        // Staggered cards entry
        tl.from(".wish-card", {
            scale: 0.7,
            opacity: 0,
            y: 80,
            duration: 1,
            stagger: {
                amount: 0.6,
                grid: "auto",
                from: "start"
            },
            ease: "elastic.out(1, 0.8)"
        },
    });
</script>
{% endblock %}